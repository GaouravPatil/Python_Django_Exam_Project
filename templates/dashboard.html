{% extends 'base.html' %}

{% block content %}
<div class="dashboard-header"
    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <div>
        <h1 style="margin: 0; font-size: 2rem; font-weight: 800;">Dashboard</h1>
        <p style="color: var(--text-muted); margin: 0.5rem 0 0 0;">Manage your exams and track progress.</p>
    </div>
    <a href="{% url 'exam_setup' %}" class="btn btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            style="margin-right: 0.5rem;">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        New Exam
    </a>
</div>

<div class="glass-card">
    <h2 style="margin-bottom: 1.5rem;">Recent Activity</h2>
    {% if exams %}
    <div class="dashboard-grid">
        {% for exam in exams %}
        <div class="glass-card exam-card" style="padding: 1.5rem; background: rgba(255,255,255,0.5);">
            <div class="exam-card-header">
                <div class="exam-meta">
                    <span class="badge {{ exam.difficulty }}">{{ exam.difficulty }}</span>
                    <span>{{ exam.start_time|date:"M d" }}</span>
                </div>
                <h3>{{ exam.subject }}</h3>
                {% if exam.is_endless %}
                <span style="font-size: 0.8rem; color: var(--primary-color); font-weight: 600;">âˆž Endless Mode</span>
                {% endif %}
            </div>

            <div class="exam-card-footer">
                {% if exam.is_completed %}
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 700; font-size: 1.25rem;">{{ exam.score }}<span
                            style="font-size: 0.875rem; color: var(--text-muted); font-weight: 400;">/{{
                            exam.total_questions }}</span></span>
                    <span style="color: var(--success); font-weight: 600; font-size: 0.875rem;">Completed</span>
                </div>
                {% else %}
                <a href="{% url 'exam_interface' exam.id %}" class="btn btn-outline btn-block">Resume Exam</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 4rem 0;">
        <p style="color: var(--text-muted); margin-bottom: 1.5rem;">You haven't taken any exams yet.</p>
        <a href="{% url 'exam_setup' %}" class="btn btn-primary">Get Started</a>
    </div>
    {% endif %}
</div>
{% endblock %}